"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../api/apis.js"),o=require("../../config.js"),i={__name:"videoSurveillance",setup(i){const n=e.ref("");e.ref("");const r=e.ref([]),d=e.ref([]),c=async()=>{let e=await t.apiGetTreeVideo({projectId:o.PROJECTID.globalProjectId});r.value=e.data.children,r.value.length<1||r.value.forEach((e=>{e.children.length>0&&e.children.forEach((e=>{e.children.length>0&&e.children.forEach((e=>{let a={videoSrc:"ezopen://open.ys7.com/"+e.serialNumber+"/2/live",videoNum:e.serialNumber,videoName:e.itemName,videoId:e.itemId};d.value.push(a)}))}))}))};function s(e){e.accessToken=n.value,l(e)}function l(a){const t=encodeURIComponent(JSON.stringify(a));e.index.navigateTo({url:"/pagesA/videoSurveillance/rePlayerVideo?videoInfo="+t})}const v=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`,u=()=>{e.index.navigateBack()};return(async()=>{let e=await t.apiGetAccessToken({appKey:"3faeec72eb124975b6a92147542fa189",appSecret:"b1efca2432e67aa7a41dfb0427a45883"});n.value=e.data.accessToken,c()})(),(t,o)=>e.e({a:a._imports_0$4,b:e.o(u),c:d.value.length>0},d.value.length>0?{d:e.f(d.value,((a,t,o)=>({a:e.o((e=>s(a)),a.videoId),b:e.t(a.videoName),c:e.o((e=>function(e){const a=new Date,t=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),o="ezopen://open.ys7.com/"+e.videoNum+"/2/local/"+v(t)+"/"+v(a);l({accessToken:n.value,videoSrc:o,videoName:e.videoName,videoNum:e.videoNum,videoId:e.videoId,isReplay:!0})}(a)),a.videoId),d:e.o((e=>s(a)),a.videoId),e:a.videoId}))),e:a._imports_1$12,f:a._imports_2$12,g:a._imports_3$7}:{h:a._imports_4$1})}},n=e._export_sfc(i,[["__scopeId","data-v-9b0937c8"]]);wx.createPage(n);
