"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),o=require("../../api/apis.js"),t=require("../../config.js");if(!Array){e.resolveComponent("uni-search-bar")()}Math;const r={__name:"contacts",setup(r){const n=e.ref(""),c=e.ref([]);e.onShow((()=>{l()}));const l=async()=>{let e;t.PROJECTID.globalProjectId&&(e=await o.apiGetContactList({projectId:t.PROJECTID.globalProjectId}),c.value=e.data)};const s=e.computed((()=>{if(c.value)return""===n.value?[...c.value]:c.value.filter((e=>e.name.toLowerCase().includes(n.value.toLowerCase())||e.phone.toLowerCase().includes(n.value.toLowerCase())))})),u=e=>{n.value=e.detail.value};function i(){e.index.navigateTo({url:"/pages/contacts/operatorPage?value=add"})}return(o,t)=>e.e({a:a._imports_0$2,b:e.o(i),c:e.o(u),d:e.o(o.search),e:e.o((e=>n.value=e)),f:e.p({placeholder:"搜索",clearButton:"auto",cancelButton:"none",modelValue:n.value}),g:s.value.length>0},s.value.length>0?{h:e.f(s.value,((a,o,t)=>({a:e.t(a.name),b:e.t(a.phone),c:e.o((o=>{return t=a.id,void e.index.navigateTo({url:`/pages/contacts/operatorPage?id=${t}&value=check`});var t}),a.id),d:e.o((o=>{return t=a.phone,void e.index.makePhoneCall({phoneNumber:t,success:function(){console.log("拨打电话成功")},fail:function(e){console.error("拨打电话失败",e)}});var t}),a.id),e:a.id}))),i:a._imports_2$3,j:a._imports_2$4}:{})}},n=e._export_sfc(r,[["__scopeId","data-v-dfaa723a"]]);wx.createPage(n);
