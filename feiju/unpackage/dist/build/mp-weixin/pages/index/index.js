"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),a=require("../../api/apis.js"),r=require("../../config.js"),o={__name:"index",setup(o){const n=e.ref([]),i=e.ref([]);let l=e.ref([]);const u=e.ref([]),s=e.ref([]);let d=e.ref(""),c=e.ref(0),g=e.ref(0);e.ref([]),e.onShow((()=>{r.PROJECTID.globalProjectId&&(v(r.PROJECTID.globalProjectId),f(r.PROJECTID.globalProjectId))}));function p(e){let t=e.detail.value;c.value=t,d.value=l.value[t],r.PROJECTID.globalProjectId=u[d.value],v(r.PROJECTID.globalProjectId),f(r.PROJECTID.globalProjectId)}const v=async e=>{let t=await a.apiGetRealTimeNum({projectId:e});i.value=t.data;let r=i.value.alarmNumber+i.value.warningNumber;g.value=r},f=async e=>{let t=new Date,r=new Date(t);r.setDate(r.getDate()-7);let o=await a.apiGetHiddenDanger({projectId:e,startDate:m(r),endDate:m(t)});s.value=o.data.records},m=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`,_={0:"#F56C6C",1:"#FFAF41",2:"#61D19F",3:"#9CABCB",4:"#00ADB5"};function I(){e.index.navigateTo({url:"/pages/hiddenTrouble/photographed"})}function T(){e.index.navigateTo({url:"/pages/alarmPush/alarmPush"})}function b(){e.index.navigateTo({url:"/pages/alarmRecords/alarmRecords"})}function P(){e.index.navigateTo({url:"/pages/inspection/inspection"})}function j(){e.index.navigateTo({url:"/pages/hiddenTrouble/hiddenTrouble"})}function D(){e.index.navigateTo({url:"/pages/sceneMonitoring/sceneMonitoring"})}function h(){e.index.navigateTo({url:"/pagesA/videoSurveillance/videoSurveillance"})}return(async()=>{try{let e=await a.apiGetProject({userType:1});n.value=e.data,n.value.forEach((e=>{l.value.push(e.projectName)})),n.value.forEach((e=>{u[e.projectName]=e.projectId})),d.value=l.value[0],r.PROJECTID.globalProjectId=u[d.value],v(r.PROJECTID.globalProjectId),f(r.PROJECTID.globalProjectId)}catch(e){console.error("捕获到错误:",e)}})(),(a,r)=>e.e({a:t._imports_0$1,b:e.t(e.unref(d)),c:t._imports_1$1,d:e.unref(l),e:e.o(p),f:t._imports_2$2,g:e.o(I),h:t._imports_3$1,i:e.unref(g)>99},(e.unref(g),{}),{j:e.unref(g)>0&&e.unref(g)<100},e.unref(g)>0&&e.unref(g)<100?{k:e.t(e.unref(g))}:{},{l:e.o(T),m:e.t(i.value.alarmNumber),n:e.t(i.value.warningNumber),o:e.t(i.value.dangerNumber),p:t._imports_4$2,q:e.o(b),r:t._imports_5,s:e.o(P),t:t._imports_6,v:e.o(j),w:t._imports_7,x:e.o(D),y:t._imports_8,z:e.o(h),A:s.value.length>0},s.value.length>0?{B:e.f(s.value,((t,a,r)=>{return e.e({a:e.t(t.sceneName),b:e.t(t.dailyInspectionItemValue),c:"0"===t.state},("0"===t.state||"1"===t.state||"2"===t.state||"3"===t.state||t.state,{}),{d:"1"===t.state,e:"2"===t.state,f:"3"===t.state,g:"4"===t.state,h:(o=t.state,_[o]||"black"),i:t.id,j:e.o((a=>{return r=t.id,void e.index.navigateTo({url:"/pages/hiddenTrouble/subHiddenTrouble?id="+r});var r}),t.id)});var o})),C:t._imports_2$1}:{D:t._imports_4$1})}},n=e._export_sfc(o,[["__scopeId","data-v-f9a8140d"]]);wx.createPage(n);
