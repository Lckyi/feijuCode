"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../api/apis.js"),u=require("../../config.js");if(!Array){(e.resolveComponent("uni-popup")+e.resolveComponent("uni-popup-message"))()}Math||((()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup-message/uni-popup-message.js"))();const l={__name:"subHiddenTrouble",setup(l){const s=e.ref(null),o=e.ref([]),n=u.imgRequestHeader.URL,v=e.ref(""),i=e.ref(""),p=e.ref(""),r=e.ref(""),d=e.ref("");let c=!0;e.onLoad((e=>{s.value=e.id,m()})),e.onShow((()=>{c?c=!1:(o.value="",m())}));const m=async()=>{let e=await t.apiGetHiddenDangerById(s.value);o.value=e.data,d.value=[...o.value.attachmentList,...o.value.disposalFileList]};function f(){i.value.open()}const g=async()=>{i.value.close();try{200===(await t.apiPutDisposalAudit({adopt:!0,id:s.value})).code?(p.value.open(),o.value="",m()):T("审核失败")}catch(e){T(e.msg)}};function T(a){e.index.showToast({title:a,icon:"none",duration:2e3})}function b(){i.value.close(),e.index.navigateTo({url:"/pages/hiddenTrouble/hiddenTroubleAudit?id="+s.value})}function h(){e.index.navigateTo({url:"/pages/hiddenTrouble/hiddenTroubleLog?id="+s.value})}function x(){e.index.navigateTo({url:"/pages/hiddenTrouble/hiddenTroubleDisposal?id="+s.value})}function y(){e.index.navigateTo({url:"/pages/hiddenTrouble/hiddenTroubleAssign?id="+s.value})}const _=()=>{e.index.navigateBack()};return(t,u)=>e.e({a:a._imports_0$5,b:e.o(_),c:e.t(o.value.sceneName),d:e.o(h),e:e.t(o.value.levelName),f:e.t(o.value.sceneName),g:"0"===o.value.state},(o.value.state,{}),{h:"1"===o.value.state},(o.value.state,{}),{i:"2"===o.value.state},(o.value.state,{}),{j:"3"===o.value.state},(o.value.state,{}),{k:"4"===o.value.state},(o.value.state,{}),{l:"0"===o.value.level},(o.value.level,{}),{m:"1"===o.value.level},(o.value.level,{}),{n:"2"===o.value.level},(o.value.level,{}),{o:"3"===o.value.level},(o.value.level,{}),{p:e.t(o.value.discovererName),q:e.t(o.value.discoveryTime),r:"0"!==o.value.state},"0"!==o.value.state?{s:e.t(o.value.assignorName),t:e.t(o.value.assignTime)}:{},{v:"2"===o.value.state||"4"===o.value.state},"2"===o.value.state||"4"===o.value.state?{w:e.t(o.value.disposerName),x:e.t(o.value.disposalTime)}:{},{y:"1"===o.value.state||"4"===o.value.state},"1"===o.value.state||"4"===o.value.state?{z:e.t(o.value.closingDate)}:{},{A:a._imports_1$8,B:e.t(o.value.dailyInspectionItemValue),C:e.f(d.value,((a,t,u)=>e.e({a:a},a?e.e({b:"mp4"===a.split(".").pop()},"mp4"===a.split(".").pop()?{c:e.unref(n)+a,d:e.o((t=>{return u=e.unref(n)+a,v.value.open(),void(r.value=u);var u}),t)}:{e:e.unref(n)+a,f:e.o((t=>{return u=e.unref(n)+a,void e.index.previewImage({current:"",urls:[u]});var u}),t)}):{},{g:t}))),D:e.t(o.value.note),E:"0"!==o.value.state&&"3"!==o.value.state},"0"!==o.value.state&&"3"!==o.value.state?{F:e.t(o.value.disposalSuggestion)}:{},{G:"0"===o.value.state},"0"===o.value.state?{H:e.o(y)}:{},{I:"1"===o.value.state},"1"===o.value.state?{J:e.o(x)}:{},{K:"4"===o.value.state},"4"===o.value.state?{L:e.o(f)}:{},{M:r.value,N:e.sr(v,"a1f9efc9-0",{k:"popup"}),O:e.p({type:"center"}),P:e.o(g),Q:e.o(b),R:e.sr(i,"a1f9efc9-1",{k:"auditPopup"}),S:e.p({type:"bottom","border-radius":"20rpx 20rpx 0 0","background-color":"#fff","safe-area":!0}),T:e.p({type:"success",message:"审核成功",duration:1e3}),U:e.sr(p,"a1f9efc9-2",{k:"successPopup"}),V:e.p({type:"message"})})}},s=e._export_sfc(l,[["__scopeId","data-v-a1f9efc9"]]);wx.createPage(s);
