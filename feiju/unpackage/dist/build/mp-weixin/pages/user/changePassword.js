"use strict";const e=require("../../common/vendor.js"),o=require("../../common/assets.js");require("../../utils/jsencrypt.min.js");const s=require("../../api/apis.js");if(!Array){(e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-popup-message")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup-message/uni-popup-message.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const n={__name:"changePassword",setup(n){const a=/^(?=.*[A-Za-z])(?=.*\d).{6,20}$/,u=e.ref(""),p=e.ref(""),i=e.ref(""),t=async()=>{if(u.value)if(p.value)if(a.test(p.value))try{200===(await s.apiUpdatePssword({oldPassword:u.value,newPassword:p.value})).code?(i.value.open(),setTimeout((()=>{e.index.removeStorageSync("publicKey"),e.index.removeStorageSync("token"),e.index.removeStorageSync("userInfo"),e.index.reLaunch({url:"/pages/login/login"})}),900)):r("请输入正确的旧密码")}catch(o){r(o.msg)}else r("密码需包含数字和字母长度为6~20个字符");else r("请输入新密码");else r("请输入旧密码")};function r(o){e.index.showToast({title:o,icon:"none",duration:2e3})}const l=()=>{e.index.navigateBack()};return(s,n)=>({a:o._imports_0$4,b:e.o(l),c:e.o((e=>u.value=e)),d:e.p({type:"password",focus:!0,clearable:!1,placeholder:"请输入",modelValue:u.value}),e:e.o((e=>p.value=e)),f:e.p({type:"password",clearable:!1,placeholder:"请输入",modelValue:p.value}),g:e.o(t),h:e.p({type:"success",message:"修改成功",duration:1e3}),i:e.sr(i,"91611b61-2",{k:"updatePopup"}),j:e.p({type:"message"})})}},a=e._export_sfc(n,[["__scopeId","data-v-91611b61"]]);wx.createPage(a);
