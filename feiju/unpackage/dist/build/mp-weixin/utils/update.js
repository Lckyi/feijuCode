"use strict";const e=require("../common/vendor.js");exports.useUpdateManager=function(){const n=e.index.getUpdateManager(),o=(o=!1)=>{e.index.showModal({title:"版本更新",content:o?"新版本已经准备好，确定重启应用更新吗？":"检测到新版本，将在下次启动时更新。",showCancel:!o,success:e=>{e.confirm&&o&&n.applyUpdate()}})};return{checkForUpdate:()=>{e.index.canIUse("getUpdateManager")?(n.onCheckForUpdate((e=>{e.hasUpdate&&console.log(e.hasUpdate)})),n.onUpdateReady((()=>{o(!0)})),n.onUpdateFailed((()=>{e.index.showModal({title:"更新失败",content:"新版本下载失败，请稍后重试。",showCancel:!1})}))):console.error("当前环境不支持版本更新功能")}}};
